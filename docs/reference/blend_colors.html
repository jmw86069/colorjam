<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Blend multiple colors — blend_colors • colorjam</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Blend multiple colors — blend_colors"><meta name="description" content="Blend multiple colors"><meta property="og:description" content="Blend multiple colors"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">colorjam</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.30.900</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jmw86069/colorjam/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Blend multiple colors</h1>
      <small class="dont-index">Source: <a href="https://github.com/jmw86069/colorjam/blob/HEAD/R/colorjam-blendcolors.R" class="external-link"><code>R/colorjam-blendcolors.R</code></a></small>
      <div class="d-none name"><code>blend_colors.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Blend multiple colors</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">blend_colors</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  preset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ryb"</span>, <span class="st">"none"</span>, <span class="st">"dichromat"</span>, <span class="st">"rgb"</span>, <span class="fu"><a href="colorjam_presets.html">colorjam_presets</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  h1 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  h2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  do_plot <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  lens <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  c_weight <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  c_floor <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  apply_alpha <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flatten_alpha <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bg <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p><code>character</code> vector of R colors in hex format, or <code>list</code>
of color vectors, where each vector will be independently
blended.</p></dd>


<dt id="arg-preset">preset<a class="anchor" aria-label="anchor" href="#arg-preset"></a></dt>
<dd><p><code>character</code> value indicating the color wheel preset,
default <code>"ryb"</code> for red-yellow-blue paint-like color blending.
It is passed to <code><a href="h2hwOptions.html">colorjam::h2hwOptions()</a></code>, and permits any value
returned by <code><a href="colorjam_presets.html">colorjam_presets()</a></code>.</p></dd>


<dt id="arg-do-plot">do_plot<a class="anchor" aria-label="anchor" href="#arg-do-plot"></a></dt>
<dd><p><code>logical</code> indicating whether to depict the color
blend operation using <code><a href="https://rdrr.io/pkg/jamba/man/showColors.html" class="external-link">jamba::showColors()</a></code>.</p></dd>


<dt id="arg-lens">lens<a class="anchor" aria-label="anchor" href="#arg-lens"></a></dt>
<dd><p><code>numeric</code> value used to influence the color saturation
after averaging color wheel angles.</p></dd>


<dt id="arg-c-weight">c_weight<a class="anchor" aria-label="anchor" href="#arg-c-weight"></a></dt>
<dd><p><code>numeric</code> value used to weight the average color
chroma (saturation) using the mean chroma values of the input
colors. When <code>c_weight=0</code> the chroma uses the radius returned
by the mean color wheel angle.</p></dd>


<dt id="arg-c-floor">c_floor<a class="anchor" aria-label="anchor" href="#arg-c-floor"></a></dt>
<dd><p><code>numeric</code> value indicating the <code>C</code> chroma HCL value
below which a color is considered to be "grey" and unsaturated.
When this happens, the hue contribution is set to 0.001 relative
to other colors being blended. This correction is done because
every color is assigned one <code>H</code> hue value in HCL, even when
the <code>C</code> chroma (saturation) is zero, therefore these colors
effectively have no <code>H</code> hue.</p></dd>


<dt id="arg-apply-alpha">apply_alpha<a class="anchor" aria-label="anchor" href="#arg-apply-alpha"></a></dt>
<dd><p><code>logical</code> default TRUE, whether to apply alpha
transparency to the output color. In other words, if the input
colors are transparent, the output will also contain transparency
when <code>apply_alpha=TRUE</code>.</p></dd>


<dt id="arg-flatten-alpha">flatten_alpha<a class="anchor" aria-label="anchor" href="#arg-flatten-alpha"></a></dt>
<dd><p><code>logical</code> default FALSE, whether to "flatten" the
color transparency by blending with the current background color,
defined by <code>bg</code>.
This argument is only used when <code>apply_alpha=TRUE</code>.</p></dd>


<dt id="arg-bg">bg<a class="anchor" aria-label="anchor" href="#arg-bg"></a></dt>
<dd><p><code>character</code> default NULL, used to define the default
background color, used only when <code>flatten_alpha=TRUE</code>.
When NULL, it checks for an open graphics device with <code><a href="https://rdrr.io/r/grDevices/dev.html" class="external-link">dev.list()</a></code>
and if open it open it uses <code>par("bg")</code>. However if no
graphics device is open, it does not call <code>par("bg")</code> because
that would open a new graphics device. Therefore when no graphics
device is open, NULL is converted to "white" background.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments are ignored.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>character</code> vector with blended color; when input <code>x</code>
is a <code>list</code> the returned vector will have length <code>length(x)</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function is intended to blend two or more colors,
by default using "paint mixing" style, similar to subtractive
color mixing. It accomplishes this goal by using a red-yellow-blue
color wheel (very similar to cyan-yellow-magenta), then determines
the average color hue with appropriate loss of color saturation.</p>
<p>The process creates a unit vector for each color, whose length
is scaled relative to the saturation and alpha transparency,
with maximum length=1.
The average angle of these unit vectors is used as the final color
hue, and the distance from origin is used to derive the new color
chroma (similar to saturation). The end goal is for blue-yellow
to make green, blue-red to make purple, and red-yellow to make orange.
Current RGB color blending fails at least one of these criteria.</p>
<p>This approach enables blending more than
two colors, which is fairly unique for color functions in R.
Note that the approach, when used to blend multiple very different
colors, tends to "muddy" the output color, similar to using finger
paints. Eventually if you add enough colors, it turns "bleh".</p><div class="section">
<h3 id="new-transparency-arguments-in-">New transparency arguments in 0.0.30.900<a class="anchor" aria-label="anchor" href="#new-transparency-arguments-in-"></a></h3>

<ul><li><p><code>apply_alpha=TRUE</code> will
return a color with appropriate alpha transparency based upon the
input colors. For example, blending red with red should always
produce red. However, blending 50% transparent red with 50% transparent
red should produce 75% transparent red. In effect, the redness
should build with more layers of transparent red.</p></li>
<li><p><code>flatten_alpha=TRUE</code> (default is FALSE) will flatten a transparent
blended color to the background, which is useful for situations
where the alpha transparency would be ignored. In other words,
34% transparent red would be flattened to <code>"#FFAAAAFF"</code> and should
appear nearly identical to <code>"#FF000057"</code> in R plots.</p></li>
<li><p>color wheel red-yellow-blue, subtractive color mixing</p></li>
<li><p>can blend more than two colors at once</p></li>
<li><p>accounts for transparency of individual colors</p></li>
</ul><p>The basic design guide was to meet these expectations:</p><ul><li><p>red + yellow = orange</p></li>
<li><p>blue + yellow = green</p></li>
<li><p>red + blue = purple</p></li>
<li><p>blue + red + yellow = some brown/gray substance</p></li>
</ul><p>The input <code>x</code> can be a vector of colors, or a <code>list</code>. When
<code>x</code> is a <code>list</code> then the unique vectors are blended, returning
a vector with length <code>length(x)</code>.</p>
<p>The default additive color mixing, with red-green-blue colors
used in electronic monitors, does not meet these criteria.
(In no logical paint mixing exercise would someone expect that
mixing red and green would make yellow; or that
blue and yellow would make grey.)</p>
<p>In general the function performs well, with some exceptions
where the color hue angle is not well-normalized opposite
its complementary color, and therefore does not make the
expected "brownish/grey" output. Examples include
<code>blend_colors(c("yellow", "purple"))</code> which is closer
to blue + yellow = green, because purple is also composed
of blue with some red. Indeed, the R color hue for purple
is 283; the hue for blue is 266; the hue for red is 12 (372);
which means purple is substantially closer to blue than red.
A suitable workaround in this case is to use
<code>blend_colors(c("yellow", "deeppink4"))</code>.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other colorjam core:
<code><a href="closestRcolor.html">closestRcolor</a>()</code>,
<code><a href="closest_named_color.html">closest_named_color</a>()</code>,
<code><a href="color_complement.html">color_complement</a>()</code>,
<code><a href="colors_to_df.html">colors_to_df</a>()</code>,
<code><a href="group2colors.html">group2colors</a>()</code>,
<code><a href="rainbowJam.html">rainbowJam</a>()</code>,
<code><a href="sort_colors.html">sort_colors</a>()</code>,
<code><a href="subset_colors.html">subset_colors</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">blend_colors</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"yellow"</span><span class="op">)</span>, do_plot<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="blend_colors-1.png" alt="" width="768" height="768"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "#E9AC7EFF"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">blend_colors</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"gold"</span><span class="op">)</span>, do_plot<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="blend_colors-2.png" alt="" width="768" height="768"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "#10A376FF"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">blend_colors</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dodgerblue"</span>, <span class="st">"firebrick2"</span><span class="op">)</span>, do_plot<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="blend_colors-3.png" alt="" width="768" height="768"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "#CC57C3FF"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">blend_colors</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"green"</span>, <span class="st">"dodgerblue"</span><span class="op">)</span>, do_plot<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="blend_colors-4.png" alt="" width="768" height="768"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "#00D8DDFF"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">blend_colors</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"gold"</span>, <span class="st">"blue"</span><span class="op">)</span>, do_plot<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="blend_colors-5.png" alt="" width="768" height="768"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "#B07A9BFF"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">blend_colors</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"deeppink2"</span>, <span class="st">"yellow"</span><span class="op">)</span>, do_plot<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="blend_colors-6.png" alt="" width="768" height="768"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "#D5B09EFF"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">blend_colors</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue4"</span>, <span class="st">"darkorange1"</span><span class="op">)</span>, do_plot<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="blend_colors-7.png" alt="" width="768" height="768"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "#8D4B69FF"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">blend_colors</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#FF000040"</span>, <span class="st">"#FF000080"</span><span class="op">)</span>, do_plot<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "#FF0000FF"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/title.html" class="external-link">title</a></span><span class="op">(</span>main<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"blend identical transparent colors\n"</span>,</span></span>
<span class="r-in"><span>   <span class="st">"returning transparent colors\n"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="blend_colors-8.png" alt="" width="768" height="768"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">blend_colors</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#FF000040"</span>, <span class="st">"#FF000080"</span><span class="op">)</span>, do_plot<span class="op">=</span><span class="cn">TRUE</span>, flatten_alpha<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "#FF0000FF"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/title.html" class="external-link">title</a></span><span class="op">(</span>main<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"blend identical transparent colors\n"</span>,</span></span>
<span class="r-in"><span>   <span class="st">"then flatten alpha transparency\n(same visual result)"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="blend_colors-9.png" alt="" width="768" height="768"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">blend_colors</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"yellow"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"gold"</span><span class="op">)</span><span class="op">)</span>, do_plot<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "#E9AC7EFF" "#10A376FF"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by James M. Ward.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

