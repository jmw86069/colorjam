<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert numeric matrix to heatmap colors — matrix2heatColors • colorjam</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert numeric matrix to heatmap colors — matrix2heatColors"><meta name="description" content="Convert numeric matrix to heatmap colors"><meta property="og:description" content="Convert numeric matrix to heatmap colors"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">colorjam</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.34.900</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jmw86069/colorjam/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Convert numeric matrix to heatmap colors</h1>
      <small class="dont-index">Source: <a href="https://github.com/jmw86069/colorjam/blob/HEAD/R/jam-color.R" class="external-link"><code>R/jam-color.R</code></a></small>
      <div class="d-none name"><code>matrix2heatColors.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Convert numeric matrix to heatmap colors</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">matrix2heatColors</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  colorV <span class="op">=</span> <span class="fu"><a href="group2colors.html">group2colors</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  defaultBaseColor <span class="op">=</span> <span class="st">"#FFFFFF"</span>,</span>
<span>  transformFunc <span class="op">=</span> <span class="va">c</span>,</span>
<span>  lens <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  shareLimit <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  numLimitFactor <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  numLimit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  baseline <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  color_below_baseline <span class="op">=</span> <span class="st">"#FFFFFF"</span>,</span>
<span>  divergent <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rampN <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  trimRamp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p><code>numeric</code> matrix. If there are no <code>colnames(x)</code> they will
be created using <code>jamba::makeNames(rep("x", ncol(x)))</code>.</p></dd>


<dt id="arg-colorv">colorV<a class="anchor" aria-label="anchor" href="#arg-colorv"></a></dt>
<dd><p><code>character</code> vector of R colors, named by <code>colnames(x)</code>,
and recycled to <code>ncol(x)</code> if needed. If <code>colorV</code> is supplied as
a list, the list elements are mapped to <code>colnames(x)</code> in order.</p></dd>


<dt id="arg-defaultbasecolor">defaultBaseColor<a class="anchor" aria-label="anchor" href="#arg-defaultbasecolor"></a></dt>
<dd><p><code>character</code> vector of R colors used as the default
base color, when <code>colorV</code> is supplied as a vector.</p></dd>


<dt id="arg-transformfunc">transformFunc<a class="anchor" aria-label="anchor" href="#arg-transformfunc"></a></dt>
<dd><p><code>function</code> applied to numeric values before
the color gradient is mapped to numeric values. For example,
<code>transformFunc=function(i)-log10(i)</code> would map colors to P-value
using a <code>-log10(p)</code> transformation.</p></dd>


<dt id="arg-lens">lens<a class="anchor" aria-label="anchor" href="#arg-lens"></a></dt>
<dd><p><code>numeric</code> value passed to <code><a href="https://jmw86069.github.io/jamba/reference/warpRamp.html" class="external-link">jamba::warpRamp()</a></code> to adjust the
distribution of colors along the numeric range.</p></dd>


<dt id="arg-sharelimit">shareLimit<a class="anchor" aria-label="anchor" href="#arg-sharelimit"></a></dt>
<dd><p><code>logical</code> indicating whether one numeric limit <code>numLimit</code>
should be used to define the numeric range for color mapping.</p></dd>


<dt id="arg-numlimitfactor">numLimitFactor<a class="anchor" aria-label="anchor" href="#arg-numlimitfactor"></a></dt>
<dd><p><code>numeric</code> when <code>numLimit</code> is NULL,
this factor is applied to
the maximum numeric value to determine the <code>numLimit</code>.</p></dd>


<dt id="arg-numlimit">numLimit<a class="anchor" aria-label="anchor" href="#arg-numlimit"></a></dt>
<dd><p><code>numeric</code> value to define the maximum numeric value
above which all numeric values are mapped to the maximum color.
When set to <code>NULL</code> the <code>numLimitFactor</code> is used to define
the <code>numLimit</code>.</p></dd>


<dt id="arg-baseline">baseline<a class="anchor" aria-label="anchor" href="#arg-baseline"></a></dt>
<dd><p><code>numeric</code> value to define the numeric baseline, used
when <code>divergent=FALSE</code>. Values are recycled to <code>ncol(x)</code> to be
applied to each column individually.</p></dd>


<dt id="arg-color-below-baseline">color_below_baseline<a class="anchor" aria-label="anchor" href="#arg-color-below-baseline"></a></dt>
<dd><p><code>character</code> color used when numeric value is
below the <code>baseline</code>. Values are recycled to <code>ncol(x)</code> to be
applied to each column individually. When <code>color_below_baseline</code>
is <code>NULL</code>, the first color in the color ramp is used for all
values below the baseline.</p></dd>


<dt id="arg-divergent">divergent<a class="anchor" aria-label="anchor" href="#arg-divergent"></a></dt>
<dd><p><code>logical</code> indicating whether to apply colors to the numeric
range symmetric around zero.</p></dd>


<dt id="arg-rampn">rampN<a class="anchor" aria-label="anchor" href="#arg-rampn"></a></dt>
<dd><p><code>integer</code> value to define the number of color breaks for
each color gradient.</p></dd>


<dt id="arg-trimramp">trimRamp<a class="anchor" aria-label="anchor" href="#arg-trimramp"></a></dt>
<dd><p><code>numeric</code> vector with two values, used by
<code><a href="https://jmw86069.github.io/jamba/reference/getColorRamp.html" class="external-link">jamba::getColorRamp()</a></code> to trim the intermediate color gradient before
creating the final color ramp with length <code>rampN</code>. For example,
by default <code><a href="https://jmw86069.github.io/jamba/reference/getColorRamp.html" class="external-link">jamba::getColorRamp()</a></code> creates a color gradient with
15 colorr, defined by argument <code>gradientN=15</code>, so the argument
<code>trimRamp=c(4,2)</code> will trim the first 4 colors and the last 2 colors
from the 15-color gradient, before generating the final color
gradient with length <code>rampN</code>. The <code>trimRamp</code> argument is especially
useful to remove the leading white color, or to trim the first
few colors to ensure the first color in the gradient is visibly
different from the background color defined by <code>defaultBaseColor</code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p><code>logical</code> indicating whether to print verbose output.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments are passed to <code><a href="https://jmw86069.github.io/jamba/reference/getColorRamp.html" class="external-link">jamba::getColorRamp()</a></code>
for additional customization. These arguments are handled across
all columns, and not a column-by-column basis.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function is intended as a rapid way of applying a color
gradient to columns of numeric values, where each column
has its own base color. It calls <code><a href="https://jmw86069.github.io/jamba/reference/getColorRamp.html" class="external-link">jamba::getColorRamp()</a></code>
for each column, and when supplied with one color, it
creates a color gradient from <code>"grey95"</code> to the output
of <code><a href="https://jmw86069.github.io/jamba/reference/color2gradient.html" class="external-link">jamba::color2gradient()</a></code>.</p>
<p>When <code>lens</code> is non-zero, the color gradient is warped in order
to intensify the color saturation across the numeric range.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other colorjam assignment:
<code><a href="add_colors.html">add_colors</a>()</code>,
<code><a href="col_div_xf.html">col_div_xf</a>()</code>,
<code><a href="col_linear_xf.html">col_linear_xf</a>()</code>,
<code><a href="color_complement.html">color_complement</a>()</code>,
<code><a href="group2colors.html">group2colors</a>()</code>,
<code><a href="rainbowJamMulti.html">rainbowJamMulti</a>()</code>,
<code><a href="vals2colorLevels.html">vals2colorLevels</a>()</code>,
<code><a href="vibrant_color_by_hue.html">vibrant_color_by_hue</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="co"># generate a random numeric matrix</span></span></span>
<span class="r-in"><span><span class="va">m1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>ncol<span class="op">=</span><span class="fl">12</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">120</span><span class="op">)</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="va">m1n</span> <span class="op">&lt;-</span> <span class="va">m1</span>;</span></span>
<span class="r-in"><span><span class="va">m1n</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">m1</span><span class="op">)</span>, digits<span class="op">=</span><span class="fl">2</span><span class="op">)</span>, trim<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu">jamba</span><span class="fu">::</span><span class="fu"><a href="https://jmw86069.github.io/jamba/reference/imageByColors.html" class="external-link">imageByColors</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   <span class="fu">matrix2heatColors</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">m1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      transformFunc<span class="op">=</span><span class="va">c</span>,</span></span>
<span class="r-in"><span>      divergent<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>      lens<span class="op">=</span><span class="op">-</span><span class="fl">5</span>,</span></span>
<span class="r-in"><span>      shareNumLimit<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>      baseline<span class="op">=</span><span class="fl">0</span>,</span></span>
<span class="r-in"><span>      numLimit<span class="op">=</span><span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   cellnote<span class="op">=</span><span class="va">m1n</span><span class="op">)</span>;</span></span>
<span class="r-plt img"><img src="matrix2heatColors-1.png" alt="" width="768" height="768"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by James M. Ward.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

